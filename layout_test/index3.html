<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tiệm Tạp Hóa - Giao diện mẫu</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a2d9d6f6f6.js" crossorigin="anonymous"></script>
  <style>
    :root{
      --accent:#FF6B35; --muted:#666; --bg:#f6f7fb; --card:#fff; --glass: rgba(255,255,255,0.6);
      --max-w:1200px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;font-family:Inter,system-ui,Arial,sans-serif;margin:0;background:var(--bg);color:#111}
    a{color:inherit;text-decoration:none}
    .container{max-width:var(--max-w);margin:0 auto;padding:0 16px}

    /* Header */
    header{background:linear-gradient(90deg,#fff 0%, #fff 60%);position:sticky;top:0;z-index:60;border-bottom:1px solid #eee}
    .topbar{display:flex;align-items:center;gap:12px;padding:10px 0}
    .logo{display:flex;align-items:center;gap:8px;font-weight:700}
    .logo img{width:46px;height:46px;border-radius:8px;object-fit:cover}
    .search{flex:1;display:flex;align-items:center;background:#fff;padding:6px;border-radius:8px;border:1px solid #eee}
    .search input{flex:1;border:0;padding:8px 10px;font-size:15px}
    .search button{border:0;background:var(--accent);color:#fff;padding:8px 12px;border-radius:6px;cursor:pointer}
    .top-actions{display:flex;align-items:center;gap:12px}
    .icon-btn{background:transparent;border:0;padding:6px;cursor:pointer;font-size:18px}
    .avatar{display:flex;align-items:center;gap:8px}
    .avatar img{width:36px;height:36px;border-radius:50%;object-fit:cover}
    .auth-btn{background:transparent;border:1px solid var(--accent);color:var(--accent);padding:6px 10px;border-radius:6px;cursor:pointer}

    /* nav */
    nav{background:#fff;border-top:1px solid #f0f0f0}
    .nav-row{display:flex;align-items:center;gap:18px;padding:10px 0}
    .nav-row a{padding:8px 10px;border-radius:6px;color:var(--muted)}
    .nav-row a.active{color:var(--accent);font-weight:600}

    /* layout */
    .layout{display:flex;gap:18px;padding:18px 0}
    aside.sidebar{width:260px;position:sticky;top:88px;height:calc(100vh - 88px);align-self:flex-start;background:linear-gradient(180deg,var(--card),#fff);border-radius:10px;padding:12px;border:1px solid #eee;box-shadow:0 6px 20px rgba(20,20,50,0.03)}
    .sidebar h4{margin:6px 0 12px;font-size:15px;color:#222}
    .side-list{list-style:none;padding:0;margin:0}
    .side-list li{padding:10px;border-radius:8px;display:flex;align-items:center;gap:10px;cursor:default}
    .side-list li:hover{background:var(--bg)}
    .side-list .section{font-weight:700;background:linear-gradient(90deg,#fff8f3,#fff);padding:8px;border-radius:8px;margin-bottom:8px;display:flex;align-items:center;gap:8px}

    /* main */
    main{flex:1}
    .section-title{display:flex;justify-content:space-between;align-items:center;margin:6px 0 12px}
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
    .card{background:var(--card);border-radius:12px;padding:10px;border:1px solid #eee;box-shadow:0 6px 18px rgba(10,10,30,0.03);display:flex;flex-direction:column;transition:transform .18s,box-shadow .18s}
    .card:hover{transform:translateY(-6px);box-shadow:0 10px 30px rgba(10,10,30,0.08)}
    .thumb{height:160px;border-radius:10px;background:#f7f7f7;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .thumb img{max-width:100%;max-height:100%;object-fit:contain}
    .meta{padding-top:8px;flex:1}
    .pname{font-weight:600;font-size:15px;height:40px;overflow:hidden}
    .price-row{display:flex;align-items:center;justify-content:space-between;margin-top:8px;gap:8px}
    .price{font-weight:700}
    .oldprice{text-decoration:line-through;color:var(--muted);font-size:13px}
    .sale-badge{background:#ffefec;color:var(--accent);padding:6px;border-radius:8px;font-weight:700;font-size:13px}
    .buy-btn{background:var(--accent);color:#fff;padding:8px;border-radius:8px;border:0;cursor:pointer;width:100%;margin-top:10px}

    /* load more */
    .load-more{display:flex;justify-content:center;margin:18px 0}
    .load-more button{padding:10px 18px;border-radius:10px;border:0;background:#fff;border:1px solid #ddd;cursor:pointer}

    /* chat widget */
    .chat-widget{position:fixed;right:18px;bottom:18px;width:380px;max-width:95vw;border-radius:12px;box-shadow:0 12px 40px rgba(20,20,50,0.2);overflow:hidden;background:var(--card);transform:translateY(0);transition:transform .2s;z-index:80}
    .chat-toggle{position:fixed;right:18px;bottom:18px;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:var(--accent);color:#fff;font-size:22px;cursor:pointer;z-index:90}
    .chat-head{background:linear-gradient(90deg,var(--accent),#ff936f);padding:10px;color:#fff;display:flex;align-items:center;gap:10px}
    .chat-body{height:300px;overflow:auto;padding:12px}
    .chat-input{display:flex;padding:10px;border-top:1px solid #f0f0f0}
    .chat-input input{flex:1;padding:8px;border-radius:8px;border:1px solid #ddd}
    .chat-input button{margin-left:8px;padding:8px 12px;border-radius:8px;border:0;background:var(--accent);color:#fff}
    .msg{margin:8px 0;display:flex}
    .msg.user{justify-content:flex-end}
    .msg .bubble{max-width:70%;padding:8px 12px;border-radius:12px;background:#f0f0f0}
    .msg.user .bubble{background:linear-gradient(90deg,var(--accent),#ff936f);color:#fff}

    /* scroll-to-top */
    .to-top{position:fixed;right:18px;bottom:88px;width:48px;height:48px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:#fff;border:1px solid #eee;cursor:pointer;box-shadow:0 8px 26px rgba(10,10,30,0.08);z-index:90}

    /* footer */
    footer{margin-top:30px;padding:24px 0;background:#fff;border-top:1px solid #eee}
    .footer-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}

    /* responsive */
    @media (max-width:1000px){.grid{grid-template-columns:repeat(3,1fr)}aside.sidebar{width:220px}}
    @media (max-width:800px){.grid{grid-template-columns:repeat(2,1fr)}.top-actions .icons{display:none}.logo span{display:none}aside.sidebar{display:none}.container{padding:0 12px}}
    @media (max-width:480px){.grid{grid-template-columns:1fr}.nav-row{overflow:auto}header{padding-bottom:6px}.chat-widget{width:100%;left:0;right:0;bottom:0;border-radius:12px 12px 0 0}}

    /* subtle animations */
    .fade-in{animation:fadeIn .36s ease both}
    @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
  </style>
</head>
<body>
  <header>
    <div class="container topbar">
      <div class="logo"><img src="https://via.placeholder.com/64x64.png?text=TBH" alt="logo"><div><div style="font-size:16px">Tiệm Tạp Hóa</div><div style="font-size:12px;color:var(--muted)">Hàng tươi - Giá tốt</div></div></div>
      <div class="search" role="search">
        <input id="searchInput" placeholder="Tìm sản phẩm, danh mục..." />
        <button id="searchBtn"><i class="fa fa-search"></i></button>
      </div>
      <div class="top-actions">
        <div class="icons">
          <button class="icon-btn" title="TikTok"><i class="fa-brands fa-tiktok"></i></button>
          <button class="icon-btn" title="Shopee"><i class="fa-brands fa-shopify"></i></button>
          <button class="icon-btn" title="Facebook"><i class="fa-brands fa-facebook"></i></button>
        </div>
        <button class="icon-btn" title="Giỏ hàng"><i class="fa fa-shopping-cart"></i></button>
        <div class="avatar">
          <img src="https://via.placeholder.com/80x80.png?text=guest" alt="guest">
          <button class="auth-btn">Đăng nhập</button>
          <button class="auth-btn" style="background:transparent;border:1px solid #eee;color:var(--muted)">Đăng ký</button>
        </div>
      </div>
    </div>
    <nav class="container">
      <div class="nav-row">
        <a href="#" class="active">Trang chủ</a>
        <a href="#cart">Giỏ hàng</a>
        <a href="#news">Tin tức</a>
        <a href="#contact">Liên hệ</a>
      </div>
    </nav>
  </header>

  <div class="container layout">
    <aside class="sidebar fade-in" aria-label="Danh mục">
      <div class="section">DANH MỤC SẢN PHẨM</div>
      <ul class="side-list">
        <li class="section"><i class="fa fa-bolt"></i> KHUYẾN MÃI SỐC</li>
        <li><i class="fa fa-gift"></i> HÀNG MỚI VỀ</li>
        <li><i class="fa fa-mars"></i> THỜI TRANG NAM</li>
        <li><i class="fa fa-venus"></i> THỜI TRANG NỮ</li>
        <li><i class="fa fa-heart"></i> CHĂM SÓC CÁ NHÂN</li>
        <li><i class="fa fa-home"></i> VỆ SINH NHÀ CỬA</li>
        <li><i class="fa fa-utensils"></i> ĐỒ DÙNG GIA ĐÌNH</li>
        <li><i class="fa fa-microchip"></i> ĐỒ CÔNG NGHỆ</li>
      </ul>
    </aside>

    <main>
      <section class="fade-in">
        <div class="section-title">
          <h3>Hàng mới về</h3>
          <div><small style="color:var(--muted)">Hiển thị <span id="countShown">8</span> sản phẩm</small></div>
        </div>
        <div id="gridNew" class="grid"></div>
        <div class="load-more"><button id="loadMoreBtn">Xem thêm sản phẩm</button></div>
      </section>

      <section class="fade-in" style="margin-top:18px">
        <div class="section-title"><h3>Sale sốc</h3></div>
        <div id="gridSale" class="grid"></div>
      </section>

      <section style="margin-top:18px">
        <div class="section-title"><h3>Tất cả sản phẩm</h3></div>
        <div id="gridAll" class="grid"></div>
      </section>

      <footer>
        <div class="container">
          <div class="footer-grid">
            <div>
              <h4>Về chúng tôi</h4>
              <p style="color:var(--muted)">Tiệm tạp hoá bán lẻ - giao nhanh trong ngày.</p>
            </div>
            <div>
              <h4>Hỗ trợ</h4>
              <ul style="color:var(--muted);padding:0;margin:0;list-style:none">
                <li>Chính sách đổi trả</li>
                <li>Hướng dẫn mua hàng</li>
                <li>Thanh toán & vận chuyển</li>
              </ul>
            </div>
            <div>
              <h4>Liên hệ</h4>
              <p style="color:var(--muted)">Hotline: 0123 456 789</p>
            </div>
            <div>
              <h4>Đăng ký nhận tin</h4>
              <input placeholder="Email của bạn" style="padding:8px;border-radius:8px;border:1px solid #eee;width:100%">
            </div>
          </div>
        </div>
      </footer>
    </main>
  </div>

  <!-- Chat widget -->
  <div id="chatWidget" class="chat-widget" style="display:none">
    <div class="chat-head">
      <div style="display:flex;align-items:center;gap:10px"><img src="https://via.placeholder.com/40x40.png?text=TB" style="width:40px;height:40px;border-radius:8px"/><div><div style="font-weight:700">Hỗ trợ trực tuyến</div><div style="font-size:12px">Mình có thể giúp gì cho bạn?</div></div></div>
    </div>
    <div id="chatBody" class="chat-body"></div>
    <div class="chat-input">
      <input id="chatInput" placeholder="Gõ tin nhắn..." />
      <button id="sendChat">Gửi</button>
    </div>
  </div>
  <div id="chatToggle" class="chat-toggle"><i class="fa fa-comment-dots"></i></div>

  <!-- Scroll to top -->
  <div id="toTop" class="to-top" title="Lên đầu trang"><i class="fa fa-arrow-up"></i></div>

  <script>
    // sample products
    const sample = [];
    for(let i=1;i<=30;i++){
      sample.push({id:i,name:`Sản phẩm #${i}`,price:(Math.floor(Math.random()*9000)+1000),oldPrice:(Math.floor(Math.random()*12000)+9000),img:`https://picsum.photos/seed/p${i}/400/300`});
    }

    // render helpers
    function formatVND(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"₫"}

    function createCard(p){
      const div = document.createElement('div');div.className='card';
      div.innerHTML = `
        <div class="thumb"><img src="${p.img}" alt="${p.name}"></div>
        <div class="meta">
          <div class="pname">${p.name}</div>
          <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
            <div class="sale-badge">-${Math.floor((1 - p.price/p.oldPrice)*100)}%</div>
          </div>
          <div class="price-row">
            <div>
              <div class="price">${formatVND(p.price)}</div>
              <div class="oldprice">${formatVND(p.oldPrice)}</div>
            </div>
          </div>
          <button class="buy-btn" onclick="buyNow(${p.id})">Mua ngay</button>
        </div>
      `;
      return div;
    }

    // initial render
    const gridNew = document.getElementById('gridNew');
    const gridSale = document.getElementById('gridSale');
    const gridAll = document.getElementById('gridAll');

    let shown = 8;
    function renderAll(){
      gridNew.innerHTML='';gridSale.innerHTML='';gridAll.innerHTML='';
      const newest = sample.slice(0, shown);
      newest.forEach(p=>gridNew.appendChild(createCard(p)));

      const sale = sample.filter((_,i)=>i%5===0).slice(0,8);
      sale.forEach(p=>gridSale.appendChild(createCard(p)));

      const all = sample.slice(0, Math.min(sample.length, shown+8));
      all.forEach(p=>gridAll.appendChild(createCard(p)));

      document.getElementById('countShown').innerText = shown;
    }
    renderAll();

    // load more with animation
    document.getElementById('loadMoreBtn').addEventListener('click', ()=>{
      const btn = document.getElementById('loadMoreBtn');
      btn.disabled=true;btn.innerText='Đang tải...';
      setTimeout(()=>{
        shown = Math.min(sample.length, shown+8);
        renderAll();
        btn.disabled=false;btn.innerText = shown < sample.length ? 'Xem thêm sản phẩm' : 'Đã tải hết';
        // subtle reveal animation
        document.querySelectorAll('.card').forEach((c,i)=>{c.style.opacity=0;c.style.transform='translateY(10px)';setTimeout(()=>{c.style.transition='all .35s';c.style.opacity=1;c.style.transform='none'},i*30)});
      },700);
    });

    // search
    document.getElementById('searchBtn').addEventListener('click', ()=>{
      const q = document.getElementById('searchInput').value.trim().toLowerCase();
      if(!q){renderAll();return}
      const res = sample.filter(p=>p.name.toLowerCase().includes(q));
      gridNew.innerHTML='';gridSale.innerHTML='';gridAll.innerHTML='';
      res.forEach(p=>gridAll.appendChild(createCard(p)));
      document.getElementById('countShown').innerText = res.length;
    });

    function buyNow(id){
      const product = sample.find(p=>p.id===id);
      alert('Thêm vào giỏ: '+product.name);
    }

    // chat widget behavior (simple canned bot)
    const chatToggle = document.getElementById('chatToggle');
    const chatWidget = document.getElementById('chatWidget');
    const chatBody = document.getElementById('chatBody');
    const chatInput = document.getElementById('chatInput');

    function appendMsg(text,who='bot'){
      const m = document.createElement('div');m.className='msg '+(who==='user'?'user':'');
      const b = document.createElement('div');b.className='bubble';b.innerText=text; m.appendChild(b);chatBody.appendChild(m);chatBody.scrollTop = chatBody.scrollHeight;
    }

    chatToggle.addEventListener('click', ()=>{
      if(chatWidget.style.display==='none'){
        chatWidget.style.display='block';chatToggle.style.display='none';appendMsg('Xin chào! Mình là trợ lý. Bạn cần giúp gì?');
      }
    });
    document.getElementById('sendChat').addEventListener('click', ()=>{sendChat()});
    chatInput.addEventListener('keydown', (e)=>{if(e.key==='Enter') sendChat()});
    function sendChat(){
      const text = chatInput.value.trim(); if(!text) return; appendMsg(text,'user'); chatInput.value='';
      // fake processing
      setTimeout(()=>{
        const answer = cannedAnswer(text);
        appendMsg(answer,'bot');
      },600);
    }
    function cannedAnswer(q){
      q=q.toLowerCase();
      if(q.includes('giá')) return 'Giá từng sản phẩm sẽ hiển thị ở trang chi tiết. Bạn muốn tìm sản phẩm nào cụ thể?';
      if(q.includes('đặt')||q.includes('mua')) return 'Bạn có thể nhấn "Mua ngay" trên sản phẩm để thêm vào giỏ. Muốn thanh toán ngay chứ?';
      if(q.includes('khuyến')||q.includes('sale')) return 'Mục Khuyến mãi Sốc đang được cập nhật mỗi ngày. Bạn muốn xem sản phẩm đang giảm giá không?';
      return 'Mình chưa hiểu rõ. Bạn thử hỏi: "Giá sữa", "Hướng dẫn đặt hàng" hoặc "Khuyến mãi".';
    }

    // small floating behavior: hide chatToggle when widget open, and handle close when click outside
    document.addEventListener('click', (e)=>{
      if(!chatWidget.contains(e.target) && !chatToggle.contains(e.target)){
        if(chatWidget.style.display==='block'){
          // close
          chatWidget.style.display='none';chatToggle.style.display='flex';
        }
      }
    });

    // scroll-to-top
    const toTop = document.getElementById('toTop');
    toTop.addEventListener('click', ()=>window.scrollTo({top:0,behavior:'smooth'}));
    window.addEventListener('scroll', ()=>{
      if(window.scrollY>300){toTop.style.display='flex'} else {toTop.style.display='none'}
    });

    // keep sidebar & chat toggle following (they are fixed/ sticky by CSS). No extra JS required for that.

    // accessibility: keyboard to open chat (c)
    document.addEventListener('keydown', (e)=>{if(e.key==='c'){chatToggle.click()}});

    // ensure initial state for toTop
    if(window.scrollY>300) toTop.style.display='flex'; else toTop.style.display='none';
  </script>
</body>
</html>
